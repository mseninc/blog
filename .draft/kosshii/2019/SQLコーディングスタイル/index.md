---
title: SQLコーディングスタイル
date: 2019-06-01
author: kosshii
tags: [その他]
---

SQLのコーディングスタイルの**普通**ってなに？
お久しぶりです。どうもこっしーです。

未だ一般的なルールがないSQLのコーディングスタイルですが、
**チームで仕事をする上で、コーディングスタイルはとても重要です。**

僕が有益だと思うコーディングスタイルを紹介していきますので、ぜひ参考にしてみてください。

## インデントは半角スペース2個

半角スペースが4つのほうが、構造を表現しやすい！と思っている人も多いと思います。

好みの問題ですが、サブクエリが入ったりするとインデントが深くなり、逆に見えにくくなってしまうので、僕は半角スペース2つが好きです。

またインデントはタブ派、という方もいるかと思います。

ただ、タブ文字は環境によってインデント幅が異なるため、チームでSQLをメンテナンスする際に、自分の環境で見えやすかったSQLが、他人の環境だと見えにくいなどの問題が生じる場合があります。

**環境に依存しない、スペースでインデントをすることをお勧めします。**

## 予約語、関数は大文字

テーブル名、テーブル別名、カラム名は小文字、それ以外の予約語や関数名などは大文字にすることで、**テーブルに関わることと、それ以外の見分けがつきやすくなります。**

ただ、 **この大文字小文字の使い分けは非常に面倒です。**

SQLの関数名はとても多く、リレーショナルデータベース管理システムごとに特有の関数も存在します。

レビューする側も実装する側も予約語と関数が大文字になっているか確認する必要があり、その分コストもかかってしまいます。

メンテナンス性を高めるために掲げたコーディング規約のせいで、仕事の効率が下がってしまうのは正直、避けたいですよね。

大文字小文字の使い分けは、チームとよく話し合って決めるのがいいかもしれません。

それを踏まえた上で、予約語、関数は大文字にした方がいいと思うかたは、ぜひ実践してみてください。

## カンマの位置は行頭

カンマの位置は行頭に置くことをお勧めします。

理由は、**Gitなどによるバージョン管理時の差分が分かりやすくなるためです。**

SELECT句を1行追加した場合、カンマが末尾だと差分は2行になりますが、行頭だと1行で済みます。

**変更意図も明確にわかるため、カンマの位置は行頭がお勧めです。**

## セミコロンを最終行におく

各SQLの終わりが明確になるため、セミコロンは最終行におく癖をつけましょう。。

## SELECT句の中で関数を使う場合は必ず別名を付ける

別名を付けることで、**一見してSQLの意図が分かるようになることもあります。**

**読み手に意図を推測できるようにコーディングするのが、メンテナンス性を高める一番の近道だと思います。**

また、推測が難しいと感じた時は、**積極的にコメントを残すようにしましょう。**

処理を直接的に書くのではなく、業務を表すような言葉を書いておくと、あとから見た時にコードの意図を追いやすくなるのでお勧めです。


## おわりに

冒頭でも触れましたが、**コーディングスタイルに絶対的なルールなんてありません。**

チームとディスカッションしながらコーディングスタイルを決めていただくのも良いと思います。

まず、**あなたなりのコーディングスタイルを考えてみてはいかがでしょうか。**